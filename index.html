<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Retro Space Game</title>
<style>
  body {
    background: radial-gradient(circle at center, #0a0a0a, #000);
    margin: 0;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .game-container {
    border: 5px solid;
    border-radius: 15px;
    animation: rainbow 5s linear infinite;
    margin: 40px;
    box-shadow: 0 0 25px rgba(0,255,255,0.5);
    position: relative;
  }

  @keyframes rainbow {
    0% { border-color: red; }
    16% { border-color: orange; }
    33% { border-color: yellow; }
    50% { border-color: lime; }
    66% { border-color: cyan; }
    83% { border-color: blue; }
    100% { border-color: magenta; }
  }

  canvas {
    background: black;
    display: block;
    border-radius: 10px;
  }

  .ui-bar {
    position: absolute;
    bottom: 0;
    width: 100%;
    background: rgba(20, 20, 20, 0.9);
    color: #0ff;
    font-family: 'Orbitron', sans-serif;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 5px 15px;
    box-sizing: border-box;
    border-top: 2px solid #0ff;
  }

  button {
    background: black;
    border: 2px solid #0ff;
    color: #0ff;
    font-family: 'Orbitron', sans-serif;
    border-radius: 6px;
    padding: 6px 12px;
    cursor: pointer;
    transition: 0.2s;
  }

  button:hover {
    background: #0ff;
    color: black;
  }
</style>
</head>
<body>
  <div class="game-container">
    <canvas id="gameCanvas" width="900" height="600"></canvas>
    <div class="ui-bar">
      <div id="lives">Lives: 3</div>
      <div id="score">Score: 0</div>
      <button id="fullscreenBtn">Fullscreen</button>
    </div>
  </div>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

let lives = 3;
let score = 0;
let asteroids = [];
let bullets = [];
let ship = { x: canvas.width / 2, y: canvas.height / 2, angle: 0, speed: 0 };
let keys = {};

// âœ… Create jagged polygon asteroid
function createAsteroid(x, y, size) {
  const vertices = 8 + Math.floor(Math.random() * 5);
  const angleStep = (Math.PI * 2) / vertices;
  const offsets = [];

  for (let i = 0; i < vertices; i++) {
    const offset = 0.6 + Math.random() * 0.4; // jagged edges
    offsets.push(offset);
  }

  return {
    x,
    y,
    dx: (Math.random() - 0.5) * 2,
    dy: (Math.random() - 0.5) * 2,
    size,
    offsets,
    angleStep
  };
}

// Create asteroids
for (let i = 0; i < 6; i++) {
  asteroids.push(createAsteroid(Math.random() * canvas.width, Math.random() * canvas.height, 40 + Math.random() * 30));
}

document.addEventListener("keydown", (e) => keys[e.code] = true);
document.addEventListener("keyup", (e) => keys[e.code] = false);

function drawShip() {
  ctx.save();
  ctx.translate(ship.x, ship.y);
  ctx.rotate(ship.angle);
  ctx.beginPath();
  ctx.moveTo(15, 0);
  ctx.lineTo(-10, -10);
  ctx.lineTo(-10, 10);
  ctx.closePath();
  ctx.strokeStyle = "#0ff";
  ctx.lineWidth = 2;
  ctx.stroke();
  ctx.restore();
}

function drawAsteroids() {
  ctx.strokeStyle = "#f0f";
  ctx.lineWidth = 2;
  for (let a of asteroids) {
    ctx.beginPath();
    for (let i = 0; i < a.offsets.length; i++) {
      const angle = i * a.angleStep;
      const radius = a.size * a.offsets[i];
      const px = a.x + Math.cos(angle) * radius;
      const py = a.y + Math.sin(angle) * radius;
      if (i === 0) ctx.moveTo(px, py);
      else ctx.lineTo(px, py);
    }
    ctx.closePath();
    ctx.stroke();
  }
}

function drawBullets() {
  ctx.fillStyle = "#ff0";
  for (let b of bullets) {
    ctx.beginPath();
    ctx.arc(b.x, b.y, 3, 0, Math.PI * 2);
    ctx.fill();
  }
}

function update() {
  if (keys["ArrowLeft"]) ship.angle -= 0.08;
  if (keys["ArrowRight"]) ship.angle += 0.08;
  if (keys["ArrowUp"]) {
    ship.speed = Math.min(ship.speed + 0.05, 5);
  } else {
    ship.speed *= 0.98;
  }

  ship.x += Math.cos(ship.angle) * ship.speed;
  ship.y += Math.sin(ship.angle) * ship.speed;

  // Wrap edges
  if (ship.x < 0) ship.x = canvas.width;
  if (ship.x > canvas.width) ship.x = 0;
  if (ship.y < 0) ship.y = canvas.height;
  if (ship.y > canvas.height) ship.y = 0;

  // Move asteroids
  for (let a of asteroids) {
    a.x += a.dx;
    a.y += a.dy;
    if (a.x < 0) a.x = canvas.width;
    if (a.x > canvas.width) a.x = 0;
    if (a.y < 0) a.y = canvas.height;
    if (a.y > canvas.height) a.y = 0;
  }

  // Move bullets
  for (let b of bullets) {
    b.x += Math.cos(b.angle) * 7;
    b.y += Math.sin(b.angle) * 7;
  }

  // Collisions
  bullets = bullets.filter(b => {
    let hit = false;
    asteroids = asteroids.filter(a => {
      const dx = a.x - b.x;
      const dy = a.y - b.y;
      const dist = Math.sqrt(dx * dx + dy * dy);
      if (dist < a.size) {
        hit = true;
        score += 10;
        document.getElementById("score").textContent = "Score: " + score;
        return false;
      }
      return true;
    });
    return !hit;
  });
}

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  drawShip();
  drawAsteroids();
  drawBullets();
}

function gameLoop() {
  update();
  draw();
  requestAnimationFrame(gameLoop);
}

document.addEventListener("keydown", (e) => {
  if (e.code === "Space") {
    bullets.push({
      x: ship.x,
      y: ship.y,
      angle: ship.angle
    });
  }
});

gameLoop();

// Fullscreen toggle
const fullscreenBtn = document.getElementById("fullscreenBtn");
fullscreenBtn.addEventListener("click", () => {
  if (!document.fullscreenElement) {
    document.documentElement.requestFullscreen();
    fullscreenBtn.textContent = "Exit Fullscreen";
  } else {
    document.exitFullscreen();
    fullscreenBtn.textContent = "Fullscreen";
  }
});
</script>
</body>
</html>
