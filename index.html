<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Asteroid Dodge</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    background: radial-gradient(circle at top, #04071a 0%, #090a14 100%);
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: 'Press Start 2P', cursive;
    overflow: hidden;
  }

  .game-container {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    border-radius: 15px;
    padding: 10px;
    animation: ledGlow 5s linear infinite;
    box-shadow: 0 0 30px 5px #0ff;
  }

  @keyframes ledGlow {
    0% { box-shadow: 0 0 30px 5px #ff0000; }
    25% { box-shadow: 0 0 30px 5px #00ff00; }
    50% { box-shadow: 0 0 30px 5px #0000ff; }
    75% { box-shadow: 0 0 30px 5px #ff00ff; }
    100% { box-shadow: 0 0 30px 5px #ff0000; }
  }

  canvas {
    background: #0b0b17;
    border: 2px solid #fff;
    border-radius: 10px;
    display: block;
  }

  .ui-bar {
    width: 100%;
    background: rgba(10, 10, 20, 0.9);
    color: white;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 15px;
    border-top: 2px solid white;
    font-size: 12px;
  }

  .ui-bar button {
    background: none;
    border: 1px solid white;
    color: white;
    padding: 5px 8px;
    cursor: pointer;
    font-family: inherit;
    border-radius: 4px;
    transition: all 0.3s;
  }

  .ui-bar button:hover {
    background: white;
    color: black;
  }
</style>
</head>
<body>
  <div class="game-container">
    <canvas id="gameCanvas"></canvas>
    <div class="ui-bar">
      <span id="lives">Lives: 3</span>
      <span id="score">Score: 0</span>
      <button id="fullscreenBtn">â›¶ Fullscreen</button>
    </div>
  </div>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    const scoreDisplay = document.getElementById("score");
    const livesDisplay = document.getElementById("lives");
    const fullscreenBtn = document.getElementById("fullscreenBtn");

    function resizeCanvas() {
      const margin = 40;
      canvas.width = window.innerWidth - margin * 2;
      canvas.height = window.innerHeight - 160;
    }
    window.addEventListener("resize", resizeCanvas);
    resizeCanvas();

    let player = { x: canvas.width / 2, y: canvas.height - 60, size: 20, speed: 7 };
    let keys = {};
    let asteroids = [];
    let score = 0;
    let lives = 3;
    let gameOver = false;

    document.addEventListener("keydown", e => keys[e.key] = true);
    document.addEventListener("keyup", e => keys[e.key] = false);

    function spawnAsteroid() {
      asteroids.push({
        x: Math.random() * canvas.width,
        y: -20,
        size: 20 + Math.random() * 30,
        speed: 2 + Math.random() * 3
      });
    }

    function update() {
      if (gameOver) return;

      if (keys["ArrowLeft"]) player.x -= player.speed;
      if (keys["ArrowRight"]) player.x += player.speed;
      player.x = Math.max(player.size, Math.min(canvas.width - player.size, player.x));

      for (let a of asteroids) {
        a.y += a.speed;
        if (a.y > canvas.height + 30) a.y = -30;
        const dx = a.x - player.x;
        const dy = a.y - player.y;
        const dist = Math.sqrt(dx * dx + dy * dy);
        if (dist < a.size + player.size) {
          lives--;
          livesDisplay.textContent = "Lives: " + lives;
          a.y = -50;
          if (lives <= 0) gameOver = true;
        }
      }

      score++;
      scoreDisplay.textContent = "Score: " + score;
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = "white";
      ctx.beginPath();
      ctx.moveTo(player.x, player.y - player.size);
      ctx.lineTo(player.x - player.size, player.y + player.size);
      ctx.lineTo(player.x + player.size, player.y + player.size);
      ctx.closePath();
      ctx.fill();

      ctx.fillStyle = "gray";
      for (let a of asteroids) {
        ctx.beginPath();
        ctx.arc(a.x, a.y, a.size, 0, Math.PI * 2);
        ctx.fill();
      }
    }

    function gameLoop() {
      update();
      draw();
      requestAnimationFrame(gameLoop);
    }

    setInterval(spawnAsteroid, 700);
    gameLoop();

    fullscreenBtn.addEventListener("click", () => {
      if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen();
      } else {
        document.exitFullscreen();
      }
    });
  </script>
</body>
</html>
