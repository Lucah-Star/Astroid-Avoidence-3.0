<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Asteroid Dodge</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    background: radial-gradient(circle at top, #030410 0%, #080a16 100%);
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: 'Press Start 2P', cursive;
    overflow: hidden;
  }

  .game-container {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    border-radius: 15px;
    padding: 10px;
    background: linear-gradient(145deg, #080b14, #101522);
    animation: ledGlow 5s linear infinite;
    box-shadow: 0 0 35px 8px #00ffff66;
  }

  @keyframes ledGlow {
    0% { box-shadow: 0 0 30px 8px #ff0000cc; }
    25% { box-shadow: 0 0 30px 8px #00ff00cc; }
    50% { box-shadow: 0 0 30px 8px #00aaffcc; }
    75% { box-shadow: 0 0 30px 8px #ff00ffcc; }
    100% { box-shadow: 0 0 30px 8px #ff0000cc; }
  }

  canvas {
    background: repeating-linear-gradient(
      0deg,
      #0a0d18,
      #0a0d18 4px,
      #0b0f1d 4px,
      #0b0f1d 8px
    );
    border: 2px solid #0ff;
    border-radius: 10px;
    display: block;
    image-rendering: pixelated;
  }

  .ui-bar {
    width: 100%;
    background: rgba(10, 10, 25, 0.95);
    color: #00ffff;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 15px;
    border-top: 2px solid #00ffff;
    font-size: 12px;
    text-shadow: 0 0 6px #00ffff88;
  }

  .ui-bar button {
    background: none;
    border: 1px solid #00ffff;
    color: #00ffff;
    padding: 5px 8px;
    cursor: pointer;
    font-family: inherit;
    border-radius: 4px;
    transition: all 0.3s;
  }

  .ui-bar button:hover {
    background: #00ffff;
    color: black;
  }

  .ui-bar span {
    text-shadow: 0 0 6px #00ffff;
  }
</style>
</head>
<body>
  <div class="game-container">
    <canvas id="gameCanvas"></canvas>
    <div class="ui-bar">
      <span id="lives">Lives: 3</span>
      <span id="score">Score: 0</span>
      <button id="fullscreenBtn">⛶ Fullscreen</button>
    </div>
  </div>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    const scoreDisplay = document.getElementById("score");
    const livesDisplay = document.getElementById("lives");
    const fullscreenBtn = document.getElementById("fullscreenBtn");

    // Resize canvas with a margin
    function resizeCanvas() {
      const margin = 40;
      canvas.width = window.innerWidth - margin * 2;
      canvas.height = window.innerHeight - 160;
    }
    window.addEventListener("resize", resizeCanvas);
    resizeCanvas();

    // Player setup (retro rocket sprite)
    let player = { 
      x: canvas.width / 2, 
      y: canvas.height - 80, 
      width: 30, 
      height: 40, 
      speed: 7 
    };

    const shipImg = new Image();
    shipImg.src = "https://i.imgur.com/zX2M5Eu.png"; // small retro rocket sprite

    let keys = {};
    let asteroids = [];
    let score = 0;
    let lives = 3;
    let gameOver = false;

    document.addEventListener("keydown", e => keys[e.key] = true);
    document.addEventListener("keyup", e => keys[e.key] = false);

    function spawnAsteroid() {
      asteroids.push({
        x: Math.random() * (canvas.width - 30),
        y: -30,
        size: 20 + Math.random() * 40,
        speed: 2 + Math.random() * 3
      });
    }

    function update() {
      if (gameOver) return;

      if (keys["ArrowLeft"]) player.x -= player.speed;
      if (keys["ArrowRight"]) player.x += player.speed;
      player.x = Math.max(0, Math.min(canvas.width - player.width, player.x));

      for (let a of asteroids) {
        a.y += a.speed;
        if (a.y > canvas.height + 30) {
          a.y = -30;
          a.x = Math.random() * (canvas.width - 30);
        }

        // Collision
        if (
          a.x < player.x + player.width &&
          a.x + a.size > player.x &&
          a.y < player.y + player.height &&
          a.y + a.size > player.y
        ) {
          lives--;
          livesDisplay.textContent = "Lives: " + lives;
          a.y = -50;
          if (lives <= 0) gameOver = true;
        }
      }

      score++;
      scoreDisplay.textContent = "Score: " + score;
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Player (rocket image)
      if (shipImg.complete) {
        ctx.drawImage(shipImg, player.x, player.y, player.width, player.height);
      } else {
        // Fallback if image not loaded
        ctx.fillStyle = "#0ff";
        ctx.fillRect(player.x, player.y, player.width, player.height);
      }

      // Asteroids
      ctx.fillStyle = "#888";
      for (let a of asteroids) {
        ctx.beginPath();
        ctx.arc(a.x, a.y, a.size, 0, Math.PI * 2);
        ctx.fill();
      }

      if (gameOver) {
        ctx.fillStyle = "#ff0044";
        ctx.font = "20px 'Press Start 2P'";
        ctx.textAlign = "center";
        ctx.fillText("GAME OVER", canvas.width / 2, canvas.height / 2);
      }
    }

    function gameLoop() {
      update();
      draw();
      requestAnimationFrame(gameLoop);
    }

    setInterval(spawnAsteroid, 700);
    gameLoop();

    // Fullscreen toggle
    fullscreenBtn.addEventListener("click", () => {
      if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen();
        fullscreenBtn.textContent = "⛶ Exit Fullscreen";
      } else {
        document.exitFullscreen();
        fullscreenBtn.textContent = "⛶ Fullscreen";
      }
    });

    document.addEventListener("fullscreenchange", () => {
      if (!document.fullscreenElement) {
        fullscreenBtn.textContent = "⛶ Fullscreen";
      }
    });
  </script>
</body>
</html>
